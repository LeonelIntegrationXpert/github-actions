# Passo 5: Propagar versÃ£o para outras branches com merge automÃ¡tico (prioriza branch origem)
- name: ðŸ”„ Propagar versÃ£o para as demais branches
  run: |
    echo "ðŸŒ¿ Branch de origem: $GITHUB_REF_NAME"

    # Define as branches que receberÃ£o o merge
    TARGET_BRANCHES="dev qa prod main"

    # Remove a branch atual da lista
    PROPAGATE_BRANCHES=$(echo $TARGET_BRANCHES | sed "s/\b$GITHUB_REF_NAME\b//g")

    for BRANCH in $PROPAGATE_BRANCHES
    do
      echo "ðŸš€ Propagando versÃ£o para a branch $BRANCH"

      git fetch origin $BRANCH
      git checkout $BRANCH || git checkout -b $BRANCH origin/$BRANCH
      git pull origin $BRANCH

      # Merge com preferÃªncia para as alteraÃ§Ãµes da branch origem (dev)
      git merge -X theirs $GITHUB_REF_NAME --no-edit || true

      git push origin $BRANCH
    done
