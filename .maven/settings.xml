<?xml version="1.0" encoding="UTF-8"?>
<settings>

  <!--
    =============================================================================
     ⚙️ MuleSoft Settings.xml
    =============================================================================
     📌 Projeto   : github-actions
     ✍️  Autor     : Leonel Dorneles Porto
     📧 Email     : leoneldornelesporto@outlook.com.br
     ☎️  Telefone  : +55 53 99180-4869
    =============================================================================
     📄 Descrição :
       - 🔐 Define as credenciais para se conectar ao Anypoint Exchange (via 'servers').
       - 🌐 Cria perfis (profiles) distintos para ambientes (sandbox, dev, qa, prod),
         sobrescrevendo apenas propriedades essenciais (<env>, <region>, <cloudhub.*>, etc.).
       - 🏢 Inclui o ID da organização MuleSoft para compor a URL privada do Exchange.
    =============================================================================
     🔗 Referências:
       - 🗂 Perfis do Maven: https://maven.apache.org/settings.html
       - 📦 Mule Maven Plugin: https://docs.mulesoft.com/mule-runtime/latest/mule-maven-plugin
       - 🔑 Connected App Scopes: https://help.salesforce.com/s/articleView?id=001119708&type=1
    =============================================================================
  -->

  <!-- ======================================================== -->
  <!-- 🧰 Grupos de plugins (necessário para reconhecer Mule)   -->
  <!-- ======================================================== -->
  <pluginGroups>
    <pluginGroup>org.mule.tools</pluginGroup>
  </pluginGroups>

  <!-- ======================================================== -->
  <!-- 🔐 Servidores e credenciais para repositórios do Maven   -->
  <!-- ======================================================== -->
  <servers>
    <!-- 📝 O connected app deve conter as devidas permissões (scopes).
         Ver: https://help.salesforce.com/s/articleView?id=001119708&type=1 -->
    <server>
      <id>Repository</id>
      <!-- 🆔 Este <id> deve coincidir com o <serverId> no pom.xml -->
      <username>~~~Client~~~</username>
      <!-- 🔑 Usamos concatenação de client.id e client.secret: `id~?~secret` -->
      <password>${client.id}~?~${client.secret}</password>
    </server>

    <!-- 🔗 Server para baixar do Exchange (Repositories) -->
    <server>
      <id>anypoint-exchange-v3</id> <!-- 🔗 Precisa bater com o <repository> do pom.xml -->
      <username>~~~Client~~~</username> <!-- 🆔 Connected App Client ID -->
      <password>${client.id}~?~${client.secret}</password> <!-- 🔑 Connected App Client Secret -->
    </server>
  </servers>

  <!-- ======================================================== -->
  <!-- ⚙️ Propriedades padrão (podem ser sobrescritas pelos perfis) -->
  <!-- ======================================================== -->
  <properties>
    <!-- 🌎 Região padrão do CloudHub -->
    <region>Cloudhub-US-East-2</region>

    <!-- ⚙️ Recursos padrão -->
    <cloudhub.vcores>0.1</cloudhub.vcores>
    <cloudhub.replicas>1</cloudhub.replicas>

    <!-- 🚀 Canal de release -->
    <releaseChannel>EDGE</releaseChannel>

    <!-- 🐘 Versão do Runtime Mule -->
    <app.runtime>4.9.2</app.runtime>

    <!-- ☕️ Versão do Java Runtime -->
    <java.version>17</java.version>
  </properties>

  <!-- ======================================================== -->
  <!-- 🌐 Definição de perfis para diferentes ambientes         -->
  <!-- ======================================================== -->
  <profiles>

    <!-- ============================================ -->
    <!-- 🧪 Profile 1: sandbox                       -->
    <!-- ============================================ -->
    <profile>
      <id>sandbox</id>
      <properties>
        <!-- 🧪 Ambiente Sandbox (exemplo com LTS) -->
        <env>Sandbox</env>
        <releaseChannel>LTS</releaseChannel>
        <app.runtime>4.6.14</app.runtime>
        <java.version>8</java.version>
      </properties>
    </profile>

    <!-- ============================================ -->
    <!-- 💻 Profile 2: dev                           -->
    <!-- ============================================ -->
    <profile>
      <id>dev</id>
      <properties>
        <env>dev</env>
      </properties>
    </profile>

    <!-- ============================================ -->
    <!-- 🛠 Profile 3: qa                            -->
    <!-- ============================================ -->
    <profile>
      <id>qa</id>
      <properties>
        <env>qa</env>
      </properties>
    </profile>

    <!-- ============================================ -->
    <!-- 🚀 Profile 4: prod                          -->
    <!-- ============================================ -->
    <profile>
      <id>prod</id>
      <properties>
        <env>prod</env>
      </properties>
    </profile>

  </profiles>

  <!-- ======================================================== -->
  <!-- 🔧 Ativa automaticamente o perfil 'sandbox'              -->
  <!-- (altere aqui se quiser outro como padrão)                -->
  <!-- ======================================================== -->
  <activeProfiles>
    <activeProfile>dev</activeProfile>
  </activeProfiles>

</settings>
